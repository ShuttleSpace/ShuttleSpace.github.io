import{_ as i,a,b as e}from"./chunks/xmake-remote.BGv5sTD8.js";import{_ as t,c as n,a2 as h,o as l}from"./chunks/framework.CQcFAaaG.js";const m=JSON.parse('{"title":"FAQ (F&Q)","description":"","frontmatter":{},"headers":[],"relativePath":"guide/faq.md","filePath":"guide/faq.md"}'),p={name:"guide/faq.md"};function o(d,s,k,r,c,g){return l(),n("div",null,s[0]||(s[0]=[h(`<h1 id="faq-f-q" tabindex="-1">FAQ (F&amp;Q) <a class="header-anchor" href="#faq-f-q" aria-label="Permalink to &quot;FAQ (F&amp;Q)&quot;">​</a></h1><h2 id="how-to-get-command-line-arguments-information" tabindex="-1">How to get command-line arguments information? <a class="header-anchor" href="#how-to-get-command-line-arguments-information" aria-label="Permalink to &quot;How to get command-line arguments information?&quot;">​</a></h2><p>Get the help info of the main command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--help]</span></span></code></pre></div><p>Get the help info of the configuration command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--help]</span></span></code></pre></div><p>Get the help info of the given action or plugin command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [action</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugin]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--help]</span></span></code></pre></div><p>For example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --help</span></span></code></pre></div><h2 id="how-to-suppress-all-output-info" tabindex="-1">How to suppress all output info? <a class="header-anchor" href="#how-to-suppress-all-output-info" aria-label="Permalink to &quot;How to suppress all output info?&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-q</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--quiet]</span></span></code></pre></div><h2 id="what-do-do-if-xmake-fails" tabindex="-1">What do do if Xmake fails? <a class="header-anchor" href="#what-do-do-if-xmake-fails" aria-label="Permalink to &quot;What do do if Xmake fails?&quot;">​</a></h2><p>Please attempt to clean configuration and rebuild it first.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span></code></pre></div><p>If it fails again, please add <code>-v</code> or <code>--verbose</code> options to get more verbose info.</p><p>For example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--verbose]</span></span></code></pre></div><p>And add <code>-D</code> to get the verbose backtrace and diagnosis info, then you can submit this to <a href="https://github.com/xmake-io/xmake/issues" target="_blank" rel="noreferrer">issues</a>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span></span></code></pre></div><h2 id="how-to-see-verbose-compiling-warnings" tabindex="-1">How to see verbose compiling warnings? <a class="header-anchor" href="#how-to-see-verbose-compiling-warnings" aria-label="Permalink to &quot;How to see verbose compiling warnings?&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-w</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--warning]</span></span></code></pre></div><h2 id="how-to-scan-source-code-and-generate-xmake-lua-automatically" tabindex="-1">How to scan source code and generate <code>xmake.lua</code> automatically? <a class="header-anchor" href="#how-to-scan-source-code-and-generate-xmake-lua-automatically" aria-label="Permalink to &quot;How to scan source code and generate \`xmake.lua\` automatically?&quot;">​</a></h2><p>You only need run the following command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span></code></pre></div><p>Xmake will scan all source code in current directory and build it automatically.</p><p>And we can run it directly.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span></span></code></pre></div><p>If we only want to generate <code>xmake.lua</code> file, we can run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span></code></pre></div><p>If you want to get more information, please see <a href="https://tboox.org/2017/01/07/build-without-makefile/" target="_blank" rel="noreferrer">Scan source codes and build project without makefile</a>.</p><h2 id="why-is-xmake-lua-being-executed-multiple-times" tabindex="-1">Why is xmake.lua being executed multiple times? <a class="header-anchor" href="#why-is-xmake-lua-being-executed-multiple-times" aria-label="Permalink to &quot;Why is xmake.lua being executed multiple times?&quot;">​</a></h2><p>Xmake.lua is divided into description fields and script fields. In the description field, various configuration fields are parsed multiple times in stages, and it is possible to execute multiple times. Therefore, do not write complex scripts in the description field.</p><p>If you want to write a variety of complex scripts, please configure them in the script domain. The script domain of <code>target/on_load</code> can also flexibly configure various target related settings and provide more powerful lua script module support.</p><p>See: <a href="/xmake-docs/guide/syntax_description.html">Description of Syntax Description</a> for more details.</p><h2 id="how-to-debug-xmake-source-code" tabindex="-1">How to debug Xmake source code? <a class="header-anchor" href="#how-to-debug-xmake-source-code" aria-label="Permalink to &quot;How to debug Xmake source code?&quot;">​</a></h2><h3 id="downloading-source-code" tabindex="-1">Downloading source code <a class="header-anchor" href="#downloading-source-code" aria-label="Permalink to &quot;Downloading source code&quot;">​</a></h3><p>Since Xmake uses git submodules to maintain submodules, we can pull the full source code in several ways.</p><h4 id="cloning-with-git" tabindex="-1">Cloning with git <a class="header-anchor" href="#cloning-with-git" aria-label="Permalink to &quot;Cloning with git&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recursive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/xmake-io/xmake.git</span></span></code></pre></div><p>or</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/xmake-io/xmake.git</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --init</span></span></code></pre></div><h4 id="downloading-source-packages-from-github-releases" tabindex="-1">Downloading source packages from Github Releases <a class="header-anchor" href="#downloading-source-packages-from-github-releases" aria-label="Permalink to &quot;Downloading source packages from Github Releases&quot;">​</a></h4><p>Because github&#39;s own downloads attachments do not support archiving submodules, Xmake packages an extra tarball of source code for each release and uploads it to Releases.</p><p>Therefore, do not download the wrong link address</p><ul><li>Incomplete source code: <a href="https://github.com/xmake-io/xmake/archive/refs/tags/v2.7.2.tar.gz" target="_blank" rel="noreferrer">https://github.com/xmake-io/xmake/archive/refs/tags/v2.7.2.tar.gz</a></li><li>Full source package: <a href="https://github.com/xmake-io/xmake/releases/download/v2.7.2/xmake-v2.7.2.tar.gz" target="_blank" rel="noreferrer">https://github.com/xmake-io/xmake/releases/download/v2.7.2/xmake-v2.7.2.tar.gz</a></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/xmake-io/xmake/releases/download/v2.7.2/xmake-v2.7.2.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake-v2.7.2.tar.gz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span></code></pre></div><p>! &gt; The Xmake tarball does not have a top-level xmake root directory, so it is best to unpack it with <code>-C xmake</code> to specify the output directory.</p><h3 id="compiling-source-code" tabindex="-1">Compiling source code <a class="header-anchor" href="#compiling-source-code" aria-label="Permalink to &quot;Compiling source code&quot;">​</a></h3><h4 id="compiling-on-windows" tabindex="-1">Compiling on Windows <a class="header-anchor" href="#compiling-on-windows" aria-label="Permalink to &quot;Compiling on Windows&quot;">​</a></h4><p>If you are compiling Xmake source code on Windows, you will need to bootstrap it with an existing Xmake pre-build.</p><p>Therefore we need to first install Xmake by referring to the <a href="https://xmake.io/#/zh-cn/guide/installation?id=windows" target="_blank" rel="noreferrer">Installing Xmake on Windows</a> documentation.</p><p>Then go to the Xmake source directory and compile.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> core</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xmake</span></span></code></pre></div><p>! &gt; We need to go into the core subdirectory of Xmake and execute the xmake command.</p><h4 id="compiling-on-linux-macos-freebsd" tabindex="-1">Compiling on Linux/macOS/FreeBSD <a class="header-anchor" href="#compiling-on-linux-macos-freebsd" aria-label="Permalink to &quot;Compiling on Linux/macOS/FreeBSD&quot;">​</a></h4><p>To compile Xmake on other unix-like environments, we just need to execute make in the source root.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./configure</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> make</span></span></code></pre></div><p>!&gt; On macOS, you may need to run <code>export SDKROOT=$(xcrun --sdk macosx --show-sdk-path)</code> before configuration so header files can be found at build time.</p><h3 id="loading-debugging" tabindex="-1">Loading debugging <a class="header-anchor" href="#loading-debugging" aria-label="Permalink to &quot;Loading debugging&quot;">​</a></h3><p>If the compilation is complete, we can load the Xmake binary core we just compiled and run the local Lua script.</p><h4 id="loading-the-local-debugging-environment-on-windows" tabindex="-1">Loading the local debugging environment on Windows <a class="header-anchor" href="#loading-the-local-debugging-environment-on-windows" aria-label="Permalink to &quot;Loading the local debugging environment on Windows&quot;">​</a></h4><p>Go to the <code>xmake/scripts</code> directory and double-click on the srcenv.bat script, which will automatically load the local Xmake program and scripts and open a cmd terminal.</p><p>From this terminal, we can then enable debugging.</p><p>We can also run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> os.programdir</span></span></code></pre></div><p>...to verify that we have actually loaded the local Lua scripting environment.</p><h4 id="loading-a-local-debugging-environment-on-other-platforms" tabindex="-1">Loading a local debugging environment on other platforms <a class="header-anchor" href="#loading-a-local-debugging-environment-on-other-platforms" aria-label="Permalink to &quot;Loading a local debugging environment on other platforms&quot;">​</a></h4><p>On Linux/macOS/FreeBSD it&#39;s a bit easier! Just run.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/srcenv.profile</span></span></code></pre></div><p>to get into the local source debugging environment.</p><h3 id="debugging-core-binary" tabindex="-1">Debugging core binary <a class="header-anchor" href="#debugging-core-binary" aria-label="Permalink to &quot;Debugging core binary&quot;">​</a></h3><p>Normally, to debug Xmake&#39;s Lua scripts, you just need to modify the Lua scripts in the current source directory, which takes effect in real time, and we don&#39;t need to recompile the core binary.</p><p>However, if there is a problem with Xmake&#39;s C-side core program and you need to debug it or add modules to it, you will need to recompile it.</p><p>You can use Xmake&#39;s internal logging functions like so to aide in debugging:</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tb_trace_i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xmake&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>If there is a problem with the various submodules that Xmake relies on, such as tbox, and you need to debug it, you can also go directly to the submodule source code, modify it and recompile it for execution.</p><p>However, if we need to contribute a patch, we need to commit PR to the submodule&#39;s repository and the patch will be merged and synced to the Xmake source repository by the author at a later date and time.</p><h3 id="breakpoint-debugging" tabindex="-1">Breakpoint Debugging <a class="header-anchor" href="#breakpoint-debugging" aria-label="Permalink to &quot;Breakpoint Debugging&quot;">​</a></h3><p>In version 2.8.3, we added Lua breakpoint debugging support, with <a href="https://github.com/EmmyLua/VSCode-EmmyLua" target="_blank" rel="noreferrer">VSCode-EmmyLua</a> plugin, we can easily debug Xmake source code in VSCode breakpoints.</p><p>First of all, we need to install VSCode-EmmyLua plugin in VSCode&#39;s plugin market, and then run the following command to update the xmake-repo repository to keep it up-to-date.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xrepo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update-repo</span></span></code></pre></div><p>!&gt; Xmake also needs to be kept up to date.</p><p>Then, execute the following command in your own project directory:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrepo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> env</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> emmylua_debugger</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><p>The <code>xrepo env -b emmylua_debugger</code> is used to bind the EmmyLua debugger plugin environment, and the arguments after <code>--</code> are the actual xmake commands we need to debug.</p><p>Usually we just debug the <code>xmake build</code> build, but if you want to debug other commands, you can tweak it yourself, for example, if you want to debug the <code>xmake install -o /tmp</code> install command, you can change it to:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrepo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> env</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> emmylua_debugger</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp</span></span></code></pre></div><p>After executing the above command, it will not exit immediately, it will remain in a waiting debugging state, possibly without any output.</p><p>At this point, instead of exiting it, let&#39;s go ahead and open VSCode and open Xmake&#39;s Lua script source directory in VSCode.</p><p>That is, this directory: <a href="https://github.com/xmake-io/xmake/tree/master/xmake" target="_blank" rel="noreferrer">Xmake Lua Scripts</a>, which we can download locally or directly open the lua script directory in the Xmake installation directory.</p><p>Then switch to VSCode&#39;s debugging tab and click <code>RunDebug</code> -&gt; <code>Emmylua New Debug</code> to connect to our <code>xmake build</code> command debugger and start debugging.</p><p>As you can see below, the default start breakpoint will automatically break inside <code>debugger:_start_emmylua_debugger</code>, and we can click on the single-step to jump out of the current function, which will take us to the main entry.</p><p><img src="`+i+'" alt=""></p><p>Then set your own breakpoint and click Continue to Run to break to the code location you want to debug.</p><p>We can also set breakpoints in our project&#39;s configuration scripts, which also allows us to quickly debug our own configuration scripts, not just Xmake&#39;s own source code.</p><p><img src="'+a+`" alt=""></p><h3 id="remote-debugging" tabindex="-1">Remote debugging <a class="header-anchor" href="#remote-debugging" aria-label="Permalink to &quot;Remote debugging&quot;">​</a></h3><p>Version 2.8.3 now supports remote debugging, but this feature is mainly for the author, because the author&#39;s development computer is a mac, but sometimes he still needs to be able to debug xmake source scripts on windows.</p><p>But debugging in a virtual machine is too laggy, not good experience, and the author&#39;s own computer does not have enough disk space, so I usually connect to a separate windows host to debug xmake source code remotely.</p><p>Let&#39;s start the remote compilation service on the windows machine:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span></span></code></pre></div><p>Then locally, open the project directory where you want to build, make a remote connection, and then run <code>xmake service --sync --xmakesrc=</code> to synchronise the local source:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --connect</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --sync</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --xmakesrc=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/projects/personal/xmake/xmake/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span></span></code></pre></div><p>This way, we can modify the xmake script source locally, sync it to a remote windows machine, and then execute the xmake build command remotely to get the corresponding debug output and analyse the build behaviour.</p><p>We can also pull the remote files back to the local machine for analysis with the <code>xmake service --pull=</code> command.</p><p>Note: See <a href="http://xmake.io/#/features/remote_build" target="_blank" rel="noreferrer">Remote Build Documentation</a> for a detailed description of remote build features.</p><p><img src="`+e+`" alt=""></p><h2 id="how-to-debug-repository-packages" tabindex="-1">How to debug repository packages? <a class="header-anchor" href="#how-to-debug-repository-packages" aria-label="Permalink to &quot;How to debug repository packages?&quot;">​</a></h2><p>There are many different ways to debug, here I will focus on the most common debugging method used by the author, which is to pull the xmake-repo repository directly to debug.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/xmake-io/xmake-repo.git</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/test.lua</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -vD</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --shallow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib</span></span></code></pre></div><p>Using the <code>test.lua</code> script command above to debug packages, we can repeatedly install and test the specified package. <code>--shallow</code> tells Xmake not to repeat the full installation of all its dependencies for each test, but only to test the current package.</p><p>We can also test specific platforms, architectures, build modes, vs_runtime and dynamic libraries, static libraries etc.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/test.lua</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -vD</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --shallow</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mingw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mingw=/xxx/sdk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/test.lua</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -vD</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --shallow</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> iphoneos</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> arm64</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/test.lua</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -vD</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --shallow</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -k</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shared</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --vs_runtime=MD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/test.lua</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -vD</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --shallow</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> debug</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib</span></span></code></pre></div><h3 id="debugging-local-package-source-code" tabindex="-1">Debugging local package source code <a class="header-anchor" href="#debugging-local-package-source-code" aria-label="Permalink to &quot;Debugging local package source code&quot;">​</a></h3><p>Sometimes, due to problems with the package source and build scripts, we need to modify some code in order to continue testing the installation, and it would be very tedious to go through the debugging changes in on_install by adding_patches/io.replace.</p><p>Therefore, we can specify <code>-d package_sourcedir</code> to allow the test script to go directly to our pre-downloaded package source directory and test the build installation without our code changes being reset each time.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/test.lua</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -vD</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --shallow</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp/zlib-1.2.11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib</span></span></code></pre></div><p>Once the changes have been debugged, we then generate a patch file based on the changes via <code>git diff &gt; fix.patch</code> and configure the patch package to be applied via <code>add_patches</code> to fix the package installation.</p><h3 id="remote-debugging-package-source-code" tabindex="-1">Remote debugging package source code <a class="header-anchor" href="#remote-debugging-package-source-code" aria-label="Permalink to &quot;Remote debugging package source code&quot;">​</a></h3><p>We can also debug the package remotely, by first enabling the remote service:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span></span></code></pre></div><p>Then pass in the <code>--remote</code> parameter to compile and test the package remotely.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/test.lua</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -vD</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --shallow</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp/zlib-1.2.11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib</span></span></code></pre></div><h2 id="what-should-i-do-if-the-download-package-failed-to-get-the-local-issuer-certificate" tabindex="-1">What should I do if the download package failed to get the local issuer certificate? <a class="header-anchor" href="#what-should-i-do-if-the-download-package-failed-to-get-the-local-issuer-certificate" aria-label="Permalink to &quot;What should I do if the download package failed to get the local issuer certificate?&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (60) SSL certificate problem: unable to get </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> issuer certificate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">More</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> details</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> here:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://curl.se/docs/sslcerts.html</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> verify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> legitimacy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> therefore</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> could</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">To</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> more</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> about</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> situation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">To</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> learn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> more</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> about</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> situation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> how</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> it,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> please</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> visit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> web</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> page</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mentioned</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> above.</span></span></code></pre></div><p>If you encounter the above certificate validation problem when using Xmake to install dependencies, you can try updating the cURL certificate to fix it, or just disable certificate validation in the global configuration to bypass it.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> g</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --insecure-ssl=y</span></span></code></pre></div><p>Of course, disabling certificate validation poses some security risks, but the good news is that packages in the xmake-repo repository have a strict sha256 checksum. Even if the download is hijacked, it will eventually be detected by xmake&#39;s sha256 checksum and treated as an invalid download.</p>`,129)]))}const b=t(p,[["render",o]]);export{m as __pageData,b as default};
