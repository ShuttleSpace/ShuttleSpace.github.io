import{_ as i,c as a,a2 as t,o as e}from"./chunks/framework.CQcFAaaG.js";const c=JSON.parse('{"title":"Tring to build with other build systems","description":"","frontmatter":{},"headers":[],"relativePath":"features/trybuild.md","filePath":"features/trybuild.md"}'),n={name:"features/trybuild.md"};function l(h,s,p,o,k,r){return e(),a("div",null,s[0]||(s[0]=[t(`<h1 id="tring-to-build-with-other-build-systems" tabindex="-1">Tring to build with other build systems <a class="header-anchor" href="#tring-to-build-with-other-build-systems" aria-label="Permalink to &quot;Tring to build with other build systems&quot;">​</a></h1><p>Xmake v2.3.1 and above directly interface with other third-party build systems. Even if other projects do not use xmake.lua for maintenance, Xmake can directly call other build tools to complete the compilation. Then the user can directly use a third-party build tool to compile, so why use Xmake to call it? The main benefits are:</p><ol><li>Completely consistent behavior, simplifying the compilation process. No matter which other build system is used, you only need to execute the Xmake command to compile. Users no longer need to study the different compilation processes of other tools.</li><li>Docking the configuration environment of <code>xmake config</code>, reuse the platform detection and SDK environment detection of xmake, simplify the platform configuration.</li><li>Docking cross-compilation environment, even for projects maintained with Autotools, you can quickly cross-compile through Xmake.</li></ol><h2 id="supported-build-systems" tabindex="-1">Supported build systems <a class="header-anchor" href="#supported-build-systems" aria-label="Permalink to &quot;Supported build systems&quot;">​</a></h2><ul><li>Autotools (support for cross-compiling with Xmake)</li><li>XCodeBuild</li><li>CMake (support for cross-compiling with Xmake)</li><li>Make</li><li>MSBuild</li><li>Scons</li><li>Meson</li><li>Bazel</li><li>NdkBuild</li><li>Ninja</li></ul><h2 id="automatically-detect-build-system-and-compile" tabindex="-1">Automatically detect build system and compile <a class="header-anchor" href="#automatically-detect-build-system-and-compile" aria-label="Permalink to &quot;Automatically detect build system and compile&quot;">​</a></h2><p>For example, for a project maintained using cmake, executing Xmake directly in the project root directory will automatically trigger a detection mechanism, detect CMakeLists.txt, and then prompt the user if cmake is needed to continue compiling.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">note:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CMakeLists.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> found,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> try</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (pass </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --confirm=y/n/d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> skip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> confirm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">please</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (y/n)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Symbol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prefix:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Configuring</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> done</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Generating</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> done</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> files</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> have</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> been</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> written</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to:/Users/ruki/Downloads/libpng-1.6.35/build</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[  7%] Built target png-fix-itxt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[ 21%] Built target genfiles</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[ 81%] Built target png</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[ 83%] Built target png_static</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">output</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to/Users/ruki/Downloads/libpng-1.6.35/build/artifacts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ok!</span></span></code></pre></div><h2 id="seamlessly-using-the-xmake-command" tabindex="-1">Seamlessly, using the Xmake command <a class="header-anchor" href="#seamlessly-using-the-xmake-command" aria-label="Permalink to &quot;Seamlessly, using the Xmake command&quot;">​</a></h2><p>Currently supports common commands such as <code>xmake clean</code>,<code> xmake --rebuild</code> and <code>xmake config</code> to seamlessly interface with third-party systems. We can directly clean the compiled output files of the cmake maintenance project</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --all</span></span></code></pre></div><p>If you bring <code>--all</code> to perform the cleanup, all files generated by autotools/cmake will be cleared, not only the object files. The default <code>xmake</code> is docked with incremental build behavior, but we can also force a quick rebuild:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rebuild</span></span></code></pre></div><h2 id="manually-switch-the-specified-build-system" tabindex="-1">Manually switch the specified build system <a class="header-anchor" href="#manually-switch-the-specified-build-system" aria-label="Permalink to &quot;Manually switch the specified build system&quot;">​</a></h2><p>If there are multiple build systems under maintenance in a project, such as the libpng project, which comes with Autotools/CMake/Makefile and other build system maintenance, Xmake defaults to using Autotools by default. If you want to force switch to other build systems, you can execute:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --trybuild=[autotools</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cmake</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">make</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">msbuild</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">..]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span></code></pre></div><p>In addition, the <code>--trybuild=</code> parameter is configured to manually specify the default build system, and the subsequent build process will not prompt the user for selection.</p><h2 id="cross-compile-fast" tabindex="-1">Cross compile fast! <a class="header-anchor" href="#cross-compile-fast" aria-label="Permalink to &quot;Cross compile fast!&quot;">​</a></h2><p>As we all know, although many projects maintained by Autotools support cross-compilation, the configuration process of cross-compilation is very complicated. There are still many differences in different toolchain processing methods, and many pits will be stepped in the middle.</p><p>Even if you run through a toolchain&#39;s cross-compilation, if you switch to another toolchain environment, it may take a long time, and if you use Xmake, you usually only need two simple commands:</p><p>!&gt; At present CMake/Autotools supports cross-compilation of Xmake.</p><h3 id="cross-compile-android-platform" tabindex="-1">Cross compile android platform <a class="header-anchor" href="#cross-compile-android-platform" aria-label="Permalink to &quot;Cross compile android platform&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> android</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --trybuild=autotools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [--ndk=xxx]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span></code></pre></div><p>!&gt; Among them, the --ndk parameter configuration is optional. If the user sets the ANDROID_NDK_HOME environment variable, or if the ndk is placed in ~/Library/Android/sdk/ndk-bundle, Xmake can automatically detect it.</p><p>Is not it simple? If you think this is not much, then you can directly operate <code>./configure</code> to configure cross-compilation. You can see this document for comparison: <a href="https://developer.android.com/ndk/guides/other_build_systems#autoconf" target="_blank" rel="noreferrer">Using NDK with other compilation systems</a>.</p><p>To put it bluntly, you probably have to do this, you may not be able to do it once:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TOOLCHAIN=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$NDK</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/toolchains/llvm/prebuilt/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$HOST_TAG</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AR=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TOOLCHAIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/aarch64-linux-android-ar</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AS=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TOOLCHAIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/aarch64-linux-android-as</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CC=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TOOLCHAIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/aarch64-linux-android21-clang</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CXX=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TOOLCHAIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/aarch64-linux-android21-clang++</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LD=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TOOLCHAIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/aarch64-linux-android-ld</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RANLIB=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TOOLCHAIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/aarch64-linux-android-ranlib</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> STRIP=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TOOLCHAIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/aarch64-linux-android-strip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aarch64-linux-android</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> make</span></span></code></pre></div><p>If it is CMake, cross-compilation is not an easy task. For the Android platform, this configuration is required.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -DCMAKE_TOOLCHAIN_FILE=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$NDK</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/build/cmake/android.toolchain.cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -DANDROID_ABI=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ABI</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -DANDROID_NATIVE_API_LEVEL=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$MINSDKVERSION</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     $OTHER_ARGS</span></span></code></pre></div><p>For the iOS platform, I did not find a short-answer configuration method, but found a third-party iOS toolchain configuration, which is very complicated: <a href="https://github.com/leetal/ios-cmake/blob/master/ios.toolchain.cmake" target="_blank" rel="noreferrer">https://github.com/leetal/ios-cmake/blob/master/ios.toolchain.cmake</a></p><p>For MinGW, it is another way. I have been tossing about the environment for a long time, which is very tossing.</p><p>After using XMake, whether it is CMake or Autotools, cross-compilation is very simple, and the configuration method is exactly the same, streamlined and consistent.</p><h3 id="cross-compile-iphoneos-platform" tabindex="-1">Cross compile iPhoneOS platform <a class="header-anchor" href="#cross-compile-iphoneos-platform" aria-label="Permalink to &quot;Cross compile iPhoneOS platform&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> iphoneos</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --trybuild=[cmake</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">autotools]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span></code></pre></div><h3 id="cross-compile-mingw-platform" tabindex="-1">Cross-compile MinGW platform <a class="header-anchor" href="#cross-compile-mingw-platform" aria-label="Permalink to &quot;Cross-compile MinGW platform&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mingw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --trybuild=[cmake</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">autotools]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [--mingw=xxx]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span></code></pre></div><h3 id="using-other-cross-compilation-toolchains" tabindex="-1">Using other cross-compilation toolchains <a class="header-anchor" href="#using-other-cross-compilation-toolchains" aria-label="Permalink to &quot;Using other cross-compilation toolchains&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cross</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --trybuild=[cmake</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">autotools]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --sdk=/xxxx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span></code></pre></div><p>For more cross compilation configuration details, please refer to the document: <a href="https://xmake.io/#/guide/configuration?id=cross-compilation" target="_blank" rel="noreferrer">Cross Compilation</a>, except for an additional <code>--trybuild=</code> parameter, all other cross-compilation configuration parameters are completely universal.</p><h2 id="passing-user-configuration-parameters" tabindex="-1">Passing user configuration parameters <a class="header-anchor" href="#passing-user-configuration-parameters" aria-label="Permalink to &quot;Passing user configuration parameters&quot;">​</a></h2><p>We can use <code>--tryconfigs=</code> to pass additional configuration parameters of the user to the corresponding third-party build system. For example: autotools will be passed to <code>. / Configure</code>, cmake will be passed to the<code> cmake</code> command.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --trybuild=autotools</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tryconfigs=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-enable-shared=no&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span></code></pre></div><p>For example, the above command, pass <code>--enable-shared=no</code> to<code>./configure</code> to disable dynamic library compilation. In addition, for <code>--cflags</code>,<code> --includedirs</code> and <code>--ldflags</code>, you don&#39;t need to pass<code> --tryconfigs</code>, you can pass the built-in parameters like <code>xmake config --cflags=</code> to pass through.</p><h2 id="examples-of-compiling-other-build-system" tabindex="-1">Examples of compiling other build system <a class="header-anchor" href="#examples-of-compiling-other-build-system" aria-label="Permalink to &quot;Examples of compiling other build system&quot;">​</a></h2><h3 id="general-compilation" tabindex="-1">General Compilation <a class="header-anchor" href="#general-compilation" aria-label="Permalink to &quot;General Compilation&quot;">​</a></h3><p>In most cases, the compilation method after each docking system is consistent, except for the <code>--trybuild=</code> configuration parameter.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --trybuild=[autotools</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cmake</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meson</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ninja</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bazel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">make</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">msbuild</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">xcodebuild]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span></code></pre></div><p>!&gt; We also need to make sure that the build tool specified by --trybuild is installed and working properly.</p><h3 id="building-android-jni-programs" tabindex="-1">Building Android JNI programs <a class="header-anchor" href="#building-android-jni-programs" aria-label="Permalink to &quot;Building Android JNI programs&quot;">​</a></h3><p>If <code>jni/Android.mk</code> exists in the current project, then Xmake can directly call NdkBuild to build the jni library.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> android</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --trybuild=ndkbuild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [--ndk </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xmake</span></span></code></pre></div><p>We also provided <a href="https://github.com/xmake-io/xmake-gradle" target="_blank" rel="noreferrer">xmake-gradle</a> to build jni library in gradle, you can see <a href="https://xmake.io/#/plugin/more_plugins?id=gradle-plugin-jni" target="_blank" rel="noreferrer">Uses xmake to build JNI in Gradle</a></p>`,52)]))}const F=i(n,[["render",l]]);export{c as __pageData,F as default};
